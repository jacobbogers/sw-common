# 7 Define the grid

Nomenclature:

| name                               | decl                                                                                                                                                    |
| ---------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `<line-names>`                     | `[' <custom-ident>* ']`                                                                                                                                 |
| (only with subgrid)`<name-repeat>` | `repeat( [ <integer [1,∞]> or auto-fill ], <line-names>+)`                                                                                              |
| `<length-percentage>`              | 10%, 10px, 10rem, 5ex                                                                                                                                   |
| `<line-name-list>`                 | `[ <line-names> or <name-repeat> ]+`                                                                                                                    |
| `<auto-repeat>`                    | `repeat( [ auto-fill or auto-fit ] , [ <line-names>? <fixed-size> ]+ <line-names>? )`                                                                   |
| --                                 | --                                                                                                                                                      |
| `<fixed-breadth>`                  | `<length-percentage>`                                                                                                                                   |
| --                                 | --                                                                                                                                                      |
| `<inflexible-breath>`              | `<length-percentage>` or `min-content` or `max-content` or `auto`                                                                                       |
| `<track-breath>`                   | `<inflexible-breath>` or `<flex>`                                                                                                                       |
| --                                 | --                                                                                                                                                      |
| `<fixed-size>`                     | `<fixed-breath>` or `minmax( <fixed-breath>, <track-breadth>)` or `minmax( <inflexible-breadth> , <fixed-breadth> )`                                    |
| `<track-size>`                     | `<track-breath>` or  `minmax( <inflexible-breadth> ,  <track-breadth> ) or fit-content( <length-percentage> )`                                          |
| --                                 | --                                                                                                                                                      |
| `<explicit-track-list>`            | `[ <line-names>? <track-size> ]+ <line-names>?`                                                                                                         |
| `<auto-track-list>`                | `[ <line-names>? [ <fixed-size> or <fixed-repeat> ] ]* <line-names>? <auto-repeat> [ <line-names>? [ <fixed-size> or <fixed-repeat> ] ]* <line-names>?` |
| `<track-list>`                     | `[ <line-names>? [ <track-size> or <track-repeat> ] ]+ <line-names>?`                                                                                   |


## 7.1 Define explicit grid

Explicit grid defined by 2 propertie

- `grid-template-rows`
- `grid-template-columns`
- `grid-template-areas`
- `grid`: short hand for all explicit grid props, also **RESETS implicit grid props**
- `grid-template` short hand for all three explicit grid props, **DOES NOT RESET implicit grid props**

>Any grid defined by `grid-template-areas`,
but not defined by `grid-template-rows` and `grid-template-columns`
will take sizing from the implicit grid.

>Numerical indexes: edges of the tracks
    - > 0 starting from & fro the start-most explicit line
    - < 0 count from the end side


## 7.2 `grid-template-columns`, `grid-template-rows`

Note: As of this writing (20 dec 2021) `subgrid` is only implemented in [firefox](https://caniuse.com/?search=subgrid)

value: `none|<track-list>|<auto-track-list>|subgrid`

What needs to be known beforehand:

| terms                 | doc                                                                                                                                                                                                                           |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| track sizing function | <ul><li>a length</li><li>a percentage of the grid container’s size</li><li>a measurement of the contents occupying the column or row</li><li>fraction of the free space in the grid</li><li>range using `minmax(..)`</li><ul> |
| line names            | [ `custom-ident` ]                                                                                                                                                                                                            |

### 7.2.1 Track Sizes

#### `length-percentage`

- `%` length
  - the `inner inner inline` (content box length, aka excluding horizontal padding)
  - the `inner blocksize` (content box height, aka excluding vertical padding)
  - if the grid container size depends on content of items, then `%` will be `auto` to use intrinsic sizes.

- flex (`nfr`)
  - If sum of all `fr` is less then 1 then it will only take up the fraction of the leftover space.
  - If used outside `minmax()` function then implicitly this formula is used `minmax(auto, nfr)`

- `auto` 
  - as a max, it is the `max-content` contribution
  - as a min, largest minimum size (`min-height`/`min-width`)
  - outside of `minmax` it is equal to `minmax(auto, auto)`. Behaves like `minmax(min-content, max-content)` in most cases.
  - Represents the largest max-content contribution of the grid items occupying the grid track.
  - Represents the largest min-content contribution of the grid items occupying the grid track.

- `max-content`
  - The largest `max-content` contribution in that specific track

- `min-content`
  - The smallest `min-content` contribution in that specific track

- `fit-content( length-percentage )`
  - where `minimim` represents `auto` minimum
  - where `limit` is the `track sizing function` 
  - then `fit-content( limit ) =  max(minimum, min( limit, 'max-content') )`

#### Example 15:

```css
grid-template-columns: 100px 1fr max-content minmax(min-content, 1fr);
```

- first column (track) is 100px
- 1st "fr" of 2, this will half the freespace available (at most)
- 3rd column is max(max-content of all items in that column track)
- minimal (max-content) max will be half the freespace (at most) but minimal min-content
- if the width of the grid-container is less then the sum of `100px + max-content+min-content` then
  - 2nd column will be `0`
  - _grid-line_ will be greated then grid container, overflow (if any) applies.

_Note: `row-gap`, `column-gap` and `justify-content` can add extra space to the grid container

### 7.2.2. Naming Grid Lines: the `[<custom-ident>*]` syntax

- Grid lines can always be referred to by their numerical index
- `line names` can make the grid-placement props easier to maintain
- assign line names with:
  - `grid-template-rows`
  - `grid-template-columns`
  - (implicit assigned with named grid areas) `grid-template-areas` 

#### Example 17:

```css
  display: grid;
  grid-template-columns: [first nav-start] 150px [main-start] 1fr [last];
  grid-template-rows: [first header-start] 50px [main-start] 1fr [footer-start] 50px [last];
```

```bash
                                             ──




                             1/first/nav-start       2/main-start                                       3/last


                                     │  150px          │                                                  │
                                     │                 │      1fr                                         │
                                     ├────────────────►│                                                  │
                                     │                 ├─────────────────────────────────────────────────►│
                                     │                 │                                                  │
      1/first/header-start  ──┬──────┼─────────────────┼──────────────────────────────────────────────────┼────┬────
                              │      │                 │                                                  │    │
                              │      │                 │                                                  │    │
                              │      │                 │                                                  │    │
      2/main-start          ──▼───┬──┼─────────────────┼──────────────────────────────────────────────────┼────▼────
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │   nav           │         main                                     │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  │  │                 │                                                  │
                                  ▼  │                 │                                                  │
       3/footer-start      ──────────┼─────────────────┼──────────────────────────────────────────────────┼─────────
                                     │                 │                                                  │
                                     │                 │                                                  │
       4/last                        └─────────────────┴──────────────────────────────────────────────────┘
```

### 7.2.3 Repeating Rows and Columns: the `repeat()` notation

#### Example 18

```css
grid-template-columns: 10px [col-start] 250px [col-end]
                       10px [col-start] 250px [col-end]
                       10px [col-start] 250px [col-end]
                       10px [col-start] 250px [col-end] 10px;
/* same as above, except easier to write */
grid-template-columns: repeat(4, 10px [col-start] 250px [col-end]) 10px;
```

#### 7.2.3.1 Syntax of `repeat()`

- `repeat` cannot be nested
- `auto-fill` or `auto-fit` cannot be combined with _instrinsic_ `(min-content, max-content, auto, fit-content()` or flex `fr` sizes


| name                                | decl                                                                                  |
| ----------------------------------- | ------------------------------------------------------------------------------------- |
| `<track-repeat>`                    | `repeat( [ <integer [1,∞]> ] , [ <line-names>? <track-size> ]+ <line-names>? )`       |
| `<auto-repeat>`                     | `repeat( [ auto-fill or auto-fit ] , [ <line-names>? <fixed-size> ]+ <line-names>? )` |
| `<fixed-repeat>`                    | `repeat( [ <integer [1,∞]> ] , [ <line-names>? <fixed-size> ]+ <line-names>? )`       |
| (only with subgrid) `<name-repeat>` | `repeat( [ <integer [1,∞]> or auto-fill ], <line-names>+)`                            |


Merging of line names

`repeat(2, [a] 1fr [b])` is equivalent to `[a] 1fr [b a] 1fr [b]`.


#### 7.2.3.2. Repeat-to-fill: `auto-fill` and `auto-fit` repetitions



























