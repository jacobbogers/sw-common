# 8 Placing Grid Items

## Nomenclature

| term             | description                                                                                                           |
| ---------------- | --------------------------------------------------------------------------------------------------------------------- |
| grid area        | the collection of grid cells that make up the grid                                                                    |
| containing-block | grid item containing block, altered with `align-content`, `justify-content`                                           |
| grid item        | item contained by _containing block_ and position with `align-item`, `justify-item` (aka `align-self`, `justify-self` |

## Grid placement properties

Longhands:

- `grid-row-start`
- `grid-row-end`
- `grid-column-start`
- `grid-column-end`


Shorthands:

- `grid-row`
- `grid-column`
- `grid-area`

3 placement properties values:

`<name>-start`, `<name>-end` and `span`,  (`<name>` is the column or row name)

If 2 out of 3 have definite value then the 3rd one also has an implied definite value.

|           | Position                      | Span                                   |
| --------- | ----------------------------- | -------------------------------------- |
| Definite  | At least one specified line   | Explicit, implicit, or defaulted span. |
| Automatic | No lines explicitly specified | N/A                                    |

## 8.1. Common Patterns for Grid Placement

Shorthand → longhand cascade.

- `grid-area` →
  - `grid-column` →
    - `grid-column-start`
    - `grid-column-end`
  - `grid-row` →
    - `grid-row-start`
    - `grid-row-end`


### 8.1.1. Named Areas

Examples 28

```css
article {
  grid-area: main;
  /* Places item into the named area "main". */
}
```


Examples 29

```css
article {
  grid-row-start: main; /* span is 1 (default), so if "main is multiple tracks it will only span 1*/
  /* Align the row-start edge to the start edge of the "main" named area. */
}
```
### 8.1.2. Numeric Indexes and Spans

Example 30

```css
.two {
  grid-row: 2;    /* Place item in the second row. */
  grid-column: 3; /* Place item in the third column. */
  /* Equivalent to */
  grid-area: 2 / 3; 
}
```

Default `span` is 1

Example 31

```css
.three {
  grid-row: 2 / span 5;
  /* Starts in the 2nd row,
     spans 5 rows down (ending in the 7th row). */
}

.four {
  grid-row: span 5 / 7;
  /* Ends in the 7th row,
     spans 5 rows up (starting in the 2nd row). */
}

```

### 8.1.3. Named Lines and Spans

Example 32

```css
.five {
   /* Span from line "first" to line "middle". */
  grid-column: first / middle;
}
```

Example 33

```css
.six {
  /* see only lines named "text" and span between the 5th and 7th */
  grid-row: text 5 / text 7;
   
  /* same as above */
  grid-row: text 5 / span text 2;  
}
```

### 8.1.4. Auto Placement

Example 34

 automatically placed into the next available empty grid cell, potentially growing the grid 

```css
.eight {
  grid-area: auto; /* Initial value */
}
```

Example 35:

```css
.nine {
  grid-area: span 2 / span 3;
  /* Auto-placed item, covering two rows and three columns. */
  /* row or column search for new tracks/cells is controlled by `grid-auto-flow`
}
```


## 8.2. Grid Item Placement vs. Source Order

Correct source ordering is important for speech; non CSS UA, etc


## 8.3. Line-based Placement: `grid-row-start`, `grid-column-start`, `grid-row-end`, `grid-column-end` properties

value:

`auto` | `<custom-ident>` | `[ <integer> && <custom-ident>? ]` | `[ span && [ <integer> || <custom-ident> ] ]`

- `auto`: no explicit placement (implicit), default span of 1
- `custom-ident`: 
  - if there is a line name with `<custom-ident>-start` or `<custom-ident>-end` 
  - if an area named `<custom-ident>`
  - `<custom-ident>` excludes `span` and `auto`
- `<integer> && <custom-ident>?`:
  -  number of the line, start at `1`, (or `-1` going backwards) possible scoped by `custom-ident` tracks
  -  integer 0 makes declaration invalid
- `span && [ <integer> || <custom-ident>]`:
  - if `<integer>` will span amount of tracks in that direction
  - if `<custom-ident>` will span to the next custom ident
  - if not enough `<custom-ident> lines exist they are implicitly created in the search direction

Example 36

```css
.grid { grid-template-columns: 100px; }
/*   1       2    (2 grid lines 1 and 2 enclosing 100px track)
     |-100px-|   
  */    
.griditem { grid-column: span foo / 4; }

/* 
the explicit grid location is 4, it doesnt exist so 2 grid lines are created
    1         2      3     4
    |--100px--|------|-----|

no will look for (the first) "foo" line to the left, but it does not exist so the first line before 1 will be created named [foo]

[foo]     1          2      3       4
 |--------|---100px--|------|------|

*/
```

### 8.3.1. Grid Placement Conflict Handling

- If the placement for a grid item contains two lines, and the start line is further end-ward than the end line, swap the two lines. If the start line is equal to the end line, remove the end line.

- If the placement contains two spans, remove the one contributed by the end grid-placement property.

- If the placement contains only a span for a named line, replace it with a span of 1.
  
## 8.4. Placement Shorthands: the `grid-column`, `grid-row`, and `grid-area` properties  

Value:

- `<grid-row> = value1/value2`
  - IF 2 values THEN
    - grid-row-start/grid-column-start`  = value1 
    - grid-row-end/grid-column-end`  = value2
  - ELSE IF 1 value THEN
      - IF value = custom-ident THEN
        -  grid-row-end/grid-column-end = value
     -  ELSE
        -   grid-row-end/grid-column-end = `auto`
      - END
  - END
- `<grid-columns> = <grid-column-start>[/<grid-column-end>]?`
- grid-area (4 values):
  - `<grid-area> = <grid-row-start> / <grid-column-start> / <grid-row-end>/<grid-column-end>`
- grid-area (3 values):
  - `<grid-area> = <grid-row-start> / <grid-column-start> / <grid-row-end>`
    - IF grid-row-start is custom_ident THEN
      - grid-column-end is set to that custom-ident
    - ELSE
      - grid-column-end is set to `auto`
    - END
- grid-area (2 values): `value1`/`value2`
  - IF value1 is custom-ident THEN
    - grid-row-start = grid-row-end = value1 (BEFORE the `/`)
  - ELSE
    - grid-row-end =  `auto`
  - END
- grid-area (1 value):
  - IF value is custom-ident THEN
    - all 4 values are set to this custom-ident
  - ELSE
    - all 4 values are set to `auto`
  - END

## 8.5. Grid Item Placement Algorithm
